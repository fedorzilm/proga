[2025-05-20 18:03:54.066] [INITIALIZATION] [133891280140096] Логирование в файл: server.log. Уровень: 1
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] =================================================
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] ========== ЗАПУСК СЕРВЕРА БАЗЫ ДАННЫХ ==========
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] =================================================
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] Обработчики сигналов SIGINT и SIGTERM настроены (POSIX).
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] Файл конфигурации по умолчанию найден по адресу: '/home/fedor/Рабочий стол/mod  (копия)/server.conf'
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [Конфигурация Сервера Загрузка Файла] Попытка загрузки конфигурации из файла: '/home/fedor/Рабочий стол/mod  (копия)/server.conf'
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [Конфигурация Сервера Загрузка Файла] Конфигурация из файла '/home/fedor/Рабочий стол/mod  (копия)/server.conf' успешно обработана.
[2025-05-20 18:03:54.066] [REINITIALIZATION] [133891280140096] Логгер переинициализируется. Закрытие предыдущего файла лога.
[2025-05-20 18:03:54.066] [INITIALIZATION] [133891280140096] Логирование в файл: /home/fedor/Рабочий стол/mod  (копия)/integration_tests/server_integration_test.log. Уровень: 0
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] Логгер сервера переинициализирован с финальными настройками. Уровень: 0, Файл: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/server_integration_test.log'
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain] Итоговая конфигурация сервера:
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain]   Порт: 12346
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain]   Файл тарифов: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/scenarios/scenario5/tariff_s5.cfg'
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain]   Корневая директория данных сервера (для контекста LOAD/SAVE): '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root' (Файлы будут в server_databases внутри нее)
[2025-05-20 18:03:54.066] [INFO] [133891280140096] [ServerMain]   Размер пула потоков: 4
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] Database: Экземпляр создан (конструктор по умолчанию).
[2025-05-20 18:03:54.066] [INFO] [133891280140096] TariffPlan: Попытка загрузки тарифов из файла: /home/fedor/Рабочий стол/mod  (копия)/integration_tests/scenarios/scenario5/tariff_s5.cfg
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.066] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TariffPlan: Проверка значения тарифа: 0.100000 (из токена: '0.10')
[2025-05-20 18:03:54.067] [INFO] [133891280140096] TariffPlan: Тарифы успешно загружены из файла '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/scenarios/scenario5/tariff_s5.cfg'. Загружено 24 входящих и 24 исходящих тарифных ставок.
[2025-05-20 18:03:54.067] [INFO] [133891280140096] [ServerMain] Тарифный план успешно загружен из "/home/fedor/Рабочий стол/mod  (копия)/integration_tests/scenarios/scenario5/tariff_s5.cfg"
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Конструктор Server: Используется абсолютный server_data_root_dir из конфигурации: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Конструктор Server: Итоговый server_base_path_for_commands (для файловых операций ServerCommandHandler): '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Конструктор ThreadPool: Создание пула с 4 потоками.
[2025-05-20 18:03:54.067] [DEBUG] [133891272734272] Рабочий поток ThreadPool 133891272734272: Запущен.
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Конструктор ThreadPool: Пул потоков успешно запущен. Активных потоков: 4
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Конструктор Server: ThreadPool успешно создан с 4 рабочими потоками.
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Конструктор Server: Объект сервера создан. Целевой порт для прослушивания: 12346
[2025-05-20 18:03:54.067] [DEBUG] [133891264341568] Рабочий поток ThreadPool 133891264341568: Запущен.
[2025-05-20 18:03:54.067] [DEBUG] [133891255948864] Рабочий поток ThreadPool 133891255948864: Запущен.
[2025-05-20 18:03:54.067] [DEBUG] [133891176265280] Рабочий поток ThreadPool 133891176265280: Запущен.
[2025-05-20 18:03:54.067] [INFO] [133891280140096] Запуск Server: Попытка запустить сервер на порту 12346
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TCPSocket: Сокет успешно создан. FD: 4
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TCPSocket: setsockopt(SO_REUSEADDR) successful for POSIX.
[2025-05-20 18:03:54.067] [INFO] [133891280140096] TCPSocket: Сокет успешно привязан к порту 12346
[2025-05-20 18:03:54.067] [INFO] [133891280140096] TCPSocket: Сокет переведен в режим прослушивания. Backlog: 8
[2025-05-20 18:03:54.067] [DEBUG] [133891280140096] TCPSocket: Receive timeout set to 500ms for FD: 4
[2025-05-20 18:03:54.068] [DEBUG] [133891280140096] Запуск Server: Установлен таймаут 500 мс на слушающий сокет (для accept).
[2025-05-20 18:03:54.068] [INFO] [133891280140096] Запуск Server: Сервер успешно запущен. Прослушивание на порту 12346 с очередью 8.
[2025-05-20 18:03:54.068] [INFO] [133891280140096] [ServerMain] Сервер успешно запущен. Ожидание подключений или сигнала завершения (Ctrl+C / SIGINT / SIGTERM)...
[2025-05-20 18:03:54.068] [INFO] [133891167872576] Цикл Приема Соединений Server: Поток приема соединений запущен. ID потока: 133891167872576
[2025-05-20 18:03:54.068] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:54.573] [ERROR] [133891167872576] TCPSocket: ::accept() (POSIX) failed. Error: 11 (Resource temporarily unavailable)
[2025-05-20 18:03:54.573] [DEBUG] [133891167872576] Цикл Приема Соединений Server: acceptSocket() вернул невалидный сокет, но сервер и слушающий сокет все еще активны. Ошибка accept: 11 (Resource temporarily unavailable). Возможно, таймаут или EINTR. Продолжение цикла.
[2025-05-20 18:03:54.624] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:55.140] [ERROR] [133891167872576] TCPSocket: ::accept() (POSIX) failed. Error: 11 (Resource temporarily unavailable)
[2025-05-20 18:03:55.140] [DEBUG] [133891167872576] Цикл Приема Соединений Server: acceptSocket() вернул невалидный сокет, но сервер и слушающий сокет все еще активны. Ошибка accept: 11 (Resource temporarily unavailable). Возможно, таймаут или EINTR. Продолжение цикла.
[2025-05-20 18:03:55.190] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:55.697] [ERROR] [133891167872576] TCPSocket: ::accept() (POSIX) failed. Error: 11 (Resource temporarily unavailable)
[2025-05-20 18:03:55.697] [DEBUG] [133891167872576] Цикл Приема Соединений Server: acceptSocket() вернул невалидный сокет, но сервер и слушающий сокет все еще активны. Ошибка accept: 11 (Resource temporarily unavailable). Возможно, таймаут или EINTR. Продолжение цикла.
[2025-05-20 18:03:55.748] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:56.100] [INFO] [133891167872576] TCPSocket: Принято новое соединение от 127.0.0.1:51720. Новый FD: 5
[2025-05-20 18:03:56.100] [INFO] [133891167872576] Цикл Приема Соединений Server: Принято новое соединение от 127.0.0.1:51720. FD клиента(raw): 5. Постановка в очередь ThreadPool...
[2025-05-20 18:03:56.100] [DEBUG] [133891167872576] ThreadPool Enqueue: Задача добавлена в очередь.
[2025-05-20 18:03:56.100] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] Рабочий поток ThreadPool 133891272734272: Начинает выполнение задачи.
[2025-05-20 18:03:56.100] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Задача обработчика клиента запущена.
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] [Обработчик Команд Сервера] Конструктор: Инициализирован с server_data_base_path: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.100] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "SAVE END"
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "SAVE END"
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 7
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: SAVE END
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: SAVE END
[2025-05-20 18:03:56.100] [ERROR] [133891272734272] [SCH Обработка И Отправка] InvalidArgument для 'SAVE END': SAVE: Имя файла не указано, и на сервере отсутствует предыдущий файловый контекст для сохранения.
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=400, Сообщ="Неверный аргумент в команде: SAVE: Имя файла не указано, и на сервере отсутствует предыдущий файловый контекст для сохранения.", ДлинаЗаголовка: 328, ДлинаНагрузки: 362, ОбщаяДлинаСообщ: 690
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.100] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.150] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "LOAD "dataset_A_s5.txt" END"
[2025-05-20 18:03:56.150] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "LOAD "dataset_A_s5.txt" END"
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 6
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: LOAD "dataset_A_s5.txt" END
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: LOAD "dataset_A_s5.txt" END
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Вызван с configured_root='/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root', requested_client_filename='dataset_A_s5.txt', data_subdir='server_databases'
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Эффективная база поиска данных сервера для LOAD/SAVE: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Гарантировано существование директории хранения данных сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases'
[2025-05-20 18:03:56.151] [INFO] [133891272734272] [FileUtils::getSafeServerFilePath] Определен безопасный абсолютный путь для файловой операции сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt'
[2025-05-20 18:03:56.151] [INFO] [133891272734272] [SCH Загрузка] Попытка загрузки из разрешенного безопасного пути: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt'
[2025-05-20 18:03:56.151] [INFO] [133891272734272] Database Загрузка: Попытка загрузки данных из файла: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt'
[2025-05-20 18:03:56.151] [ERROR] [133891272734272] Database Загрузка: Не удалось открыть файл: /home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=500, Сообщ="Загрузка данных из файла 'dataset_A_s5.txt' не удалась.", ДлинаЗаголовка: 190, ДлинаНагрузки: 485, ОбщаяДлинаСообщ: 675
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.151] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.239] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "PRINT_ALL END"
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "PRINT_ALL END"
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 5
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена разделяемая блокировка БД для операции чтения/нейтральной операции: PRINT_ALL END
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: PRINT_ALL END
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="База данных пуста.", ДлинаЗаголовка: 138, ДлинаНагрузки: 86, ОбщаяДлинаСообщ: 224
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята разделяемая блокировка БД.
[2025-05-20 18:03:56.239] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.333] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "SAVE END"
[2025-05-20 18:03:56.333] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "SAVE END"
[2025-05-20 18:03:56.333] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 7
[2025-05-20 18:03:56.333] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: SAVE END
[2025-05-20 18:03:56.333] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: SAVE END
[2025-05-20 18:03:56.333] [ERROR] [133891272734272] [SCH Обработка И Отправка] InvalidArgument для 'SAVE END': SAVE: Имя файла не указано, и на сервере отсутствует предыдущий файловый контекст для сохранения.
[2025-05-20 18:03:56.334] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=400, Сообщ="Неверный аргумент в команде: SAVE: Имя файла не указано, и на сервере отсутствует предыдущий файловый контекст для сохранения.", ДлинаЗаголовка: 328, ДлинаНагрузки: 362, ОбщаяДлинаСообщ: 690
[2025-05-20 18:03:56.334] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.334] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.426] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "ADD FIO "Абонент Чарли Тринадцатый" IP "11.0.0.3" DATE "03.02.2024" TRAFFIC_IN 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 TRAFFIC_OUT 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 END"
[2025-05-20 18:03:56.426] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "ADD FIO "Абонент Чарли Тринадцатый" IP "11.0.0.3" DATE "03.02.2024" TRAFFIC_IN 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 TRAFFIC_OUT 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 END"
[2025-05-20 18:03:56.426] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 0
[2025-05-20 18:03:56.426] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: ADD FIO "Абонент Чарли Тринадцатый" IP "11.0.0.3" DATE "03.02.2024" TRAFFIC_IN 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 TRAFFIC_OUT 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 END
[2025-05-20 18:03:56.426] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: ADD FIO "Абонент Чарли Тринадцатый" IP "11.0.0.3" DATE "03.02.2024" TRAFFIC_IN 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 TRAFFIC_OUT 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 3.00 END
[2025-05-20 18:03:56.427] [DEBUG] [133891272734272] Database Добавление Записи: Запись для 'Абонент Чарли Тринадцатый' добавлена. Всего записей: 1
[2025-05-20 18:03:56.427] [DEBUG] [133891272734272] [Database Добавление Записи] Запись для 'Абонент Чарли Тринадцатый' добавлена. Всего записей: 1
[2025-05-20 18:03:56.427] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Запись успешно добавлена.", ДлинаЗаголовка: 152, ДлинаНагрузки: 156, ОбщаяДлинаСообщ: 308
[2025-05-20 18:03:56.427] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.427] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.525] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "PRINT_ALL END"
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "PRINT_ALL END"
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 5
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена разделяемая блокировка БД для операции чтения/нейтральной операции: PRINT_ALL END
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: PRINT_ALL END
[2025-05-20 18:03:56.526] [INFO] [133891272734272] [SCH Печать Всех] База данных содержит 1 записей. Отправка одной частью.
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Все 1 записей успешно извлечены.", ДлинаЗаголовка: 170, ДлинаНагрузки: 396, ОбщаяДлинаСообщ: 566
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята разделяемая блокировка БД.
[2025-05-20 18:03:56.526] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.608] [ERROR] [133891167872576] TCPSocket: ::accept() (POSIX) failed. Error: 11 (Resource temporarily unavailable)
[2025-05-20 18:03:56.608] [DEBUG] [133891167872576] Цикл Приема Соединений Server: acceptSocket() вернул невалидный сокет, но сервер и слушающий сокет все еще активны. Ошибка accept: 11 (Resource temporarily unavailable). Возможно, таймаут или EINTR. Продолжение цикла.
[2025-05-20 18:03:56.621] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "SAVE "dataset_B_s5.txt" END"
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "SAVE "dataset_B_s5.txt" END"
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 7
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: SAVE "dataset_B_s5.txt" END
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: SAVE "dataset_B_s5.txt" END
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Вызван с configured_root='/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root', requested_client_filename='dataset_B_s5.txt', data_subdir='server_databases'
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Эффективная база поиска данных сервера для LOAD/SAVE: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:56.621] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Гарантировано существование директории хранения данных сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases'
[2025-05-20 18:03:56.621] [INFO] [133891272734272] [FileUtils::getSafeServerFilePath] Определен безопасный абсолютный путь для файловой операции сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:56.621] [INFO] [133891272734272] [SCH Сохранение] Попытка сохранения в указанный файл (разрешен как): '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:56.621] [INFO] [133891272734272] Database Сохранение: Попытка сохранения данных в файл: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:56.622] [INFO] [133891272734272] Database Сохранение: Успешно сохранено 1 записей в файл "/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt".
[2025-05-20 18:03:56.622] [INFO] [133891272734272] Database: currentFilename_ обновлен на: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt' после операции SAVE.
[2025-05-20 18:03:56.622] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Данные успешно сохранены в файл 'dataset_B_s5.txt'. Сохранено 1 записей.", ДлинаЗаголовка: 220, ДлинаНагрузки: 193, ОбщаяДлинаСообщ: 413
[2025-05-20 18:03:56.622] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.622] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.670] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:56.714] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "LOAD "dataset_A_s5.txt" END"
[2025-05-20 18:03:56.714] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "LOAD "dataset_A_s5.txt" END"
[2025-05-20 18:03:56.714] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 6
[2025-05-20 18:03:56.714] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: LOAD "dataset_A_s5.txt" END
[2025-05-20 18:03:56.714] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: LOAD "dataset_A_s5.txt" END
[2025-05-20 18:03:56.714] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Вызван с configured_root='/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root', requested_client_filename='dataset_A_s5.txt', data_subdir='server_databases'
[2025-05-20 18:03:56.714] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Эффективная база поиска данных сервера для LOAD/SAVE: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:56.715] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Гарантировано существование директории хранения данных сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases'
[2025-05-20 18:03:56.715] [INFO] [133891272734272] [FileUtils::getSafeServerFilePath] Определен безопасный абсолютный путь для файловой операции сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt'
[2025-05-20 18:03:56.715] [INFO] [133891272734272] [SCH Загрузка] Попытка загрузки из разрешенного безопасного пути: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt'
[2025-05-20 18:03:56.715] [INFO] [133891272734272] Database Загрузка: Попытка загрузки данных из файла: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt'
[2025-05-20 18:03:56.715] [ERROR] [133891272734272] Database Загрузка: Не удалось открыть файл: /home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_A_s5.txt
[2025-05-20 18:03:56.715] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=500, Сообщ="Загрузка данных из файла 'dataset_A_s5.txt' не удалась.", ДлинаЗаголовка: 190, ДлинаНагрузки: 485, ОбщаяДлинаСообщ: 675
[2025-05-20 18:03:56.715] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.715] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.803] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "PRINT_ALL END"
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "PRINT_ALL END"
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 5
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена разделяемая блокировка БД для операции чтения/нейтральной операции: PRINT_ALL END
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: PRINT_ALL END
[2025-05-20 18:03:56.804] [INFO] [133891272734272] [SCH Печать Всех] База данных содержит 1 записей. Отправка одной частью.
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Все 1 записей успешно извлечены.", ДлинаЗаголовка: 170, ДлинаНагрузки: 396, ОбщаяДлинаСообщ: 566
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята разделяемая блокировка БД.
[2025-05-20 18:03:56.804] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.888] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "DELETE FIO "Абонент Альфа Одиннадцатый" END"
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "DELETE FIO "Абонент Альфа Одиннадцатый" END"
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 2
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: DELETE FIO "Абонент Альфа Одиннадцатый" END
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: DELETE FIO "Абонент Альфа Одиннадцатый" END
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] Database Поиск По Критериям: Найдено 0 записей по заданным критериям.
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] [Database Поиск По Критериям] Найдено 0 записей для удаления.
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Не найдено записей, соответствующих критериям для удаления.", ДлинаЗаголовка: 215, ДлинаНагрузки: 149, ОбщаяДлинаСообщ: 364
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:56.888] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:56.975] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "PRINT_ALL END"
[2025-05-20 18:03:56.975] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "PRINT_ALL END"
[2025-05-20 18:03:56.975] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 5
[2025-05-20 18:03:56.975] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена разделяемая блокировка БД для операции чтения/нейтральной операции: PRINT_ALL END
[2025-05-20 18:03:56.975] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: PRINT_ALL END
[2025-05-20 18:03:56.975] [INFO] [133891272734272] [SCH Печать Всех] База данных содержит 1 записей. Отправка одной частью.
[2025-05-20 18:03:56.975] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Все 1 записей успешно извлечены.", ДлинаЗаголовка: 170, ДлинаНагрузки: 396, ОбщаяДлинаСообщ: 566
[2025-05-20 18:03:56.975] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята разделяемая блокировка БД.
[2025-05-20 18:03:56.976] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:57.060] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "SAVE END"
[2025-05-20 18:03:57.061] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "SAVE END"
[2025-05-20 18:03:57.061] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 7
[2025-05-20 18:03:57.061] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: SAVE END
[2025-05-20 18:03:57.061] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: SAVE END
[2025-05-20 18:03:57.061] [INFO] [133891272734272] [SCH Сохранение] Попытка сохранения в текущий файловый контекст БД: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:57.061] [INFO] [133891272734272] Database Сохранение: Попытка сохранения данных в файл: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:57.062] [INFO] [133891272734272] Database Сохранение: Успешно сохранено 1 записей в файл "/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt".
[2025-05-20 18:03:57.062] [INFO] [133891272734272] Database: currentFilename_ обновлен на: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt' после операции SAVE.
[2025-05-20 18:03:57.062] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Данные успешно сохранены в файл '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'. Сохранено 1 записей.", ДлинаЗаголовка: 331, ДлинаНагрузки: 193, ОбщаяДлинаСообщ: 524
[2025-05-20 18:03:57.062] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:57.062] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:57.144] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "LOAD "dataset_B_s5.txt" END"
[2025-05-20 18:03:57.144] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "LOAD "dataset_B_s5.txt" END"
[2025-05-20 18:03:57.144] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 6
[2025-05-20 18:03:57.144] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена эксклюзивная блокировка БД для операции записи: LOAD "dataset_B_s5.txt" END
[2025-05-20 18:03:57.144] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: LOAD "dataset_B_s5.txt" END
[2025-05-20 18:03:57.144] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Вызван с configured_root='/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root', requested_client_filename='dataset_B_s5.txt', data_subdir='server_databases'
[2025-05-20 18:03:57.145] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Эффективная база поиска данных сервера для LOAD/SAVE: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root'
[2025-05-20 18:03:57.145] [DEBUG] [133891272734272] [FileUtils::getSafeServerFilePath] Гарантировано существование директории хранения данных сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases'
[2025-05-20 18:03:57.145] [INFO] [133891272734272] [FileUtils::getSafeServerFilePath] Определен безопасный абсолютный путь для файловой операции сервера: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:57.145] [INFO] [133891272734272] [SCH Загрузка] Попытка загрузки из разрешенного безопасного пути: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:57.145] [INFO] [133891272734272] Database Загрузка: Попытка загрузки данных из файла: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt'
[2025-05-20 18:03:57.145] [INFO] [133891272734272] Database Загрузка: Загрузка из файла "/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt" завершена. Успешно загружено записей: 1.
[2025-05-20 18:03:57.145] [INFO] [133891272734272] Database: currentFilename_ обновлен на: '/home/fedor/Рабочий стол/mod  (копия)/integration_tests/test_server_data_root/server_databases/dataset_B_s5.txt' после операции LOAD.
[2025-05-20 18:03:57.145] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Данные успешно загружены из файла 'dataset_B_s5.txt'. Загружено 1 записей.", ДлинаЗаголовка: 224, ДлинаНагрузки: 235, ОбщаяДлинаСообщ: 459
[2025-05-20 18:03:57.145] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята эксклюзивная блокировка БД.
[2025-05-20 18:03:57.146] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:57.178] [ERROR] [133891167872576] TCPSocket: ::accept() (POSIX) failed. Error: 11 (Resource temporarily unavailable)
[2025-05-20 18:03:57.178] [DEBUG] [133891167872576] Цикл Приема Соединений Server: acceptSocket() вернул невалидный сокет, но сервер и слушающий сокет все еще активны. Ошибка accept: 11 (Resource temporarily unavailable). Возможно, таймаут или EINTR. Продолжение цикла.
[2025-05-20 18:03:57.227] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "PRINT_ALL END"
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "PRINT_ALL END"
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 5
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена разделяемая блокировка БД для операции чтения/нейтральной операции: PRINT_ALL END
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: PRINT_ALL END
[2025-05-20 18:03:57.227] [INFO] [133891272734272] [SCH Печать Всех] База данных содержит 1 записей. Отправка одной частью.
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Все 1 записей успешно извлечены.", ДлинаЗаголовка: 170, ДлинаНагрузки: 396, ОбщаяДлинаСообщ: 566
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята разделяемая блокировка БД.
[2025-05-20 18:03:57.227] [DEBUG] [133891272734272] TCPSocket: Receive timeout set to 120000ms for FD: 5
[2025-05-20 18:03:57.230] [DEBUG] [133891167872576] TCPSocket::acceptSocket: Ожидание входящего соединения на FD: 4
[2025-05-20 18:03:57.315] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: От клиента получен запрос: "EXIT"
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] Query Parser: Начало разбора запроса: "EXIT"
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] Query Parser: Запрос успешно разобран. Тип: 8
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Получена разделяемая блокировка БД для операции чтения/нейтральной операции: EXIT
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] [SCH Обработка И Отправка] Обработка команды: EXIT
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] [SCH Отправка Одной Части] Отправка ответа: Статус=200, Сообщ="Завершение сессии подтверждено сервером.", ДлинаЗаголовка: 181, ДлинаНагрузки: 147, ОбщаяДлинаСообщ: 328
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Снята разделяемая блокировка БД.
[2025-05-20 18:03:57.315] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Команда EXIT обработана и ответ отправлен обработчиком. Серверная задача для этого клиента теперь завершится, ожидается закрытие соединения клиентом.
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Задача обработчика сессии клиента завершается. Закрытие клиентского сокета.
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] TCPSocket: Closing socket: 5
[2025-05-20 18:03:57.315] [INFO] [133891272734272] Клиент[fd_raw:5, id_потока_tp:133891272734272]: Задача обработчика клиента завершена, клиентский сокет закрыт.
[2025-05-20 18:03:57.315] [DEBUG] [133891272734272] Рабочий поток ThreadPool 133891272734272: Завершил выполнение задачи.

[ServerMain] Получен SIGTERM. Запрос на завершение работы.
[2025-05-20 18:03:57.512] [INFO] [133891280140096] [ServerMain] Получен сигнал завершения или сервер остановлен внутренне. Инициализация Server::stop()...
[2025-05-20 18:03:57.513] [INFO] [133891280140096] Остановка Server: Инициализация процедуры завершения работы сервера...
[2025-05-20 18:03:57.513] [DEBUG] [133891280140096] Остановка Server: Закрытие слушающего сокета для разблокировки потока приема соединений...
[2025-05-20 18:03:57.513] [DEBUG] [133891280140096] TCPSocket: Closing socket: 4
[2025-05-20 18:03:57.513] [DEBUG] [133891280140096] Остановка Server: Ожидание завершения acceptor_thread_...
[2025-05-20 18:03:57.734] [ERROR] [133891167872576] TCPSocket: ::accept() (POSIX) failed. Error: 11 (Resource temporarily unavailable)
[2025-05-20 18:03:57.734] [INFO] [133891167872576] Цикл Приема Соединений Server: Обнаружен запрос на остановку ПОСЛЕ вызова accept(). Завершение потока.
[2025-05-20 18:03:57.734] [INFO] [133891167872576] Цикл Приема Соединений Server: Поток приема соединений завершен. ID потока: 133891167872576
[2025-05-20 18:03:57.735] [INFO] [133891280140096] Остановка Server: acceptor_thread_ успешно присоединен.
[2025-05-20 18:03:57.735] [DEBUG] [133891280140096] Остановка Server: Инициализация остановки ThreadPool...
[2025-05-20 18:03:57.735] [INFO] [133891280140096] ThreadPool Stop: Инициирована остановка пула потоков...
[2025-05-20 18:03:57.735] [DEBUG] [133891176265280] Рабочий поток ThreadPool 133891176265280: Остановка (stop_initiated и очередь пуста).
[2025-05-20 18:03:57.735] [DEBUG] [133891280140096] ThreadPool Stop: Ожидание завершения всех рабочих потоков (4 потоков)...
[2025-05-20 18:03:57.735] [DEBUG] [133891255948864] Рабочий поток ThreadPool 133891255948864: Остановка (stop_initiated и очередь пуста).
[2025-05-20 18:03:57.735] [DEBUG] [133891264341568] Рабочий поток ThreadPool 133891264341568: Остановка (stop_initiated и очередь пуста).
[2025-05-20 18:03:57.736] [DEBUG] [133891272734272] Рабочий поток ThreadPool 133891272734272: Остановка (stop_initiated и очередь пуста).
[2025-05-20 18:03:57.736] [INFO] [133891280140096] ThreadPool Stop: Все рабочие потоки завершены. Пул остановлен.
[2025-05-20 18:03:57.736] [INFO] [133891280140096] Остановка Server: ThreadPool успешно остановлен.
[2025-05-20 18:03:57.736] [INFO] [133891280140096] Остановка Server: Процедура завершения работы сервера завершена.
[2025-05-20 18:03:57.736] [INFO] [133891280140096] [ServerMain] Экземпляр сервера остановлен.
[2025-05-20 18:03:57.736] [INFO] [133891280140096] [ServerMain] ========== СЕРВЕР БАЗЫ ДАННЫХ УСПЕШНО ЗАВЕРШИЛ РАБОТУ ==========
[2025-05-20 18:03:57.736] [INFO] [133891280140096] Деструктор Server: Вызван деструктор сервера.
[2025-05-20 18:03:57.736] [INFO] [133891280140096] Деструктор Server: Объект сервера уничтожен.
[2025-05-20 18:03:57.736] [DEBUG] [133891280140096] Деструктор ThreadPool: Деструктор вызван.
[2025-05-20 18:03:57.736] [INFO] [133891280140096] Деструктор ThreadPool: Пул потоков уничтожен.
