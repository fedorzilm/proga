# Сценарий 4: Комплексное тестирование EDIT и CALCULATE_CHARGES

# 1. Загрузка начальных данных
LOAD "initial_data_s4.txt" END

# 2. Проверка начального состояния
PRINT_ALL END

# 3. Редактирование: Только ФИО
EDIT IP "10.20.30.1" SET FIO "Измененное Имя Один" END
SELECT IP "10.20.30.1" END 

# 4. Редактирование: Только IP
EDIT FIO "Измененное Имя Один" SET IP "10.20.30.111" END
SELECT FIO "Измененное Имя Один" END 

# 5. Редактирование: Только Дата
EDIT IP "10.20.30.111" SET DATE "11.01.2024" END
SELECT IP "10.20.30.111" END 

# 6. Редактирование: Только TRAFFIC_IN
# Исходный TRAFFIC_IN для 10.20.30.111 (бывший 10.20.30.1) был все 1.0
EDIT IP "10.20.30.111" SET TRAFFIC_IN 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 0.1 END
SELECT IP "10.20.30.111" END 

# 7. Редактирование: Только TRAFFIC_OUT
# Исходный TRAFFIC_OUT для 10.20.30.111 (бывший 10.20.30.1) был все 0.5
EDIT IP "10.20.30.111" SET TRAFFIC_OUT 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 0.2 END
SELECT IP "10.20.30.111" END 

# 8. Редактирование: Несколько полей сразу (для "Абонент Для Редактирования Три")
# Исходно: IP 10.20.30.3, DATE 20.01.2024, трафик везде 0.0
EDIT IP "10.20.30.3" SET FIO "Тройной Апдейт" DATE "21.01.2024" TRAFFIC_IN 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 3.0 TRAFFIC_OUT 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 END
SELECT FIO "Тройной Апдейт" END

# 9. CALCULATE_CHARGES: Период, покрывающий "Абонент Для Расчетов Два" (15.01.2024)
# Трафик: все 2.0 IN, все 1.0 OUT.
# Тариф IN: (12*1.0 + 12*0.5)/24 = 18/24 = 0.75 ср. за ГБ
# Тариф OUT: (12*0.8 + 12*0.4)/24 = 14.4/24 = 0.6 ср. за ГБ
# Расчет: (24часа * 2.0ГБ/час * 0.75) + (24часа * 1.0ГБ/час * 0.6) = 36.0 + 14.4 = 50.4
CALCULATE_CHARGES FIO "Абонент Для Расчетов Два" START_DATE "15.01.2024" END_DATE "15.01.2024" END

# 10. CALCULATE_CHARGES: Период до даты записи "Абонент Для Расчетов Два"
CALCULATE_CHARGES FIO "Абонент Для Расчетов Два" START_DATE "01.01.2024" END_DATE "14.01.2024" END

# 11. CALCULATE_CHARGES: Период после даты записи "Абонент Для Расчетов Два"
CALCULATE_CHARGES FIO "Абонент Для Расчетов Два" START_DATE "16.01.2024" END_DATE "31.01.2024" END

# 12. CALCULATE_CHARGES: Период частично перекрывающий, но не включающий дату записи
CALCULATE_CHARGES IP "10.20.30.2" START_DATE "14.01.2024" END_DATE "14.01.2024" END

# 13. CALCULATE_CHARGES: Для всех записей за январь 2024 (должны попасть все три)
# Измененный "Измененное Имя Один" (10.20.30.111, 11.01.2024): IN=все 0.1, OUT=все 0.2. (24*0.1*0.75) + (24*0.2*0.6) = 1.8 + 2.88 = 4.68
# "Абонент Для Расчетов Два" (10.20.30.2, 15.01.2024): 50.4 (посчитано выше)
# "Тройной Апдейт" (10.20.30.3, 21.01.2024): IN=все 3.0, OUT=все 0.0. (24*3.0*0.75) + (24*0.0*0.6) = 54.0 + 0.0 = 54.0
# Итого: 4.68 + 50.4 + 54.0 = 109.08
CALCULATE_CHARGES START_DATE "01.01.2024" END_DATE "31.01.2024" END

# 14. CALCULATE_CHARGES: На пустой выборке
CALCULATE_CHARGES FIO "Несуществующий Точно Абонент" START_DATE "01.01.2024" END_DATE "31.01.2024" END

# 15. Завершение
EXIT
